@import (reference) "../../../less/variables.less";
@import (reference) "../../../less/mixins.less";
@border-color: @white;

#top-story {
	position: relative;
}
.inner {
	background-color: @darkblue;
	padding: @measure;
	article {
		border-bottom: 1px solid @border-color;
		padding-bottom: 2 * @measure;
		margin: 0;
	}
	.menu-container {
		padding-top: 2 * @measure;
	}
	.menu-item {
		.arrow();
	}

	@media ( min-width: 770px ) {
		display: flex;
		flex-wrap: wrap;

		article {
			border-bottom: none;
			flex: 1 1 400px;
			padding-right: 1 * @measure;
			padding-bottom: 0;
		}
		.menu-container {
			flex: 0 1 150px;
			border-left: 1px solid @border-color;
			padding-left: 1 * @measure;
			padding-top: 0;
		}
	}
	@media ( min-width: 900px ) {
		padding: 2 * @measure;
	}

	.has-post-thumbnail & {
		@media ( min-width: 770px ) {
			background-color: fadeout( @darkblue, 20% );

			position: absolute;

			bottom: @measure;
			left: @measure;
			right: @measure;
		}
		@media ( min-width: 900px ) {
			bottom:  2 * @measure;
			left:    2 * @measure;
			right:   2 * @measure;
		}
	}

	article {
		h2 {
			// https://fvsch.com/css-locks/
			// y = mx + b
			// m is 12px/920px = 6/460 = 3/230 = 0.013047...
			// at x = 320px, y=28, so 28 - ( 320 * m ) = 28 - ( 320 * 3 / 230 ) = 23.826...
			font-size: calc( ( 3 / 230* 100vw ) + 24px );
			line-height: 1.3;
			@media ( min-width: 1240px ) {
				font-size: 40px;
				line-height: 1.4
			}
			@media ( max-width: 320px ) {
				font-size: 28px;
			}
		}
		h2 a {
			text-decoration: none;
			&:hover {
				text-decoration: underline;
			}
		}
		.excerpt :last-child {
			margin-bottom: 0;
		}
	}
	.menu-container {
		h3 {
			font-weight: 700;
			font-size: 14px;
			text-transform: uppercase;
			margin: 0;
		}
		ul {
			margin: 0;
		}
		li:first-child {
			margin-top: 0.5 * @measure;
		}
		li {
			list-style: none;
			padding-top: 0.5 * @measure;
			padding-bottom: 0.5 * @measure;
			margin-bottom: 0;
		}
		li + li {
			border-top: 1px solid @border-color;
		}
		a {
			text-decoration: none;
			&:hover {
				text-decoration: underline;
			}
		}
	}
}
.inner.has-white-color {
	a {
		color: @white;
		&:hover {
			color: @white;
		}
	}
}

.bottom-widget-area {

	.largo-recent-posts {
		// colorway to match the mockup
		&.default {
			color: white;
			background-color: @darkblue;
			background-image:
				linear-gradient( to bottom, @white, @white),
				url( '../../../images/blue-bkg.svg' )
			;
			background-size:
				100% 14rem,
				cover
			;
			background-position:
				top center,
				center center,
			;
			background-repeat:
				no-repeat,
				no-repeat
			;

			a {
				color: @white;
				&:hover {
					color: @white;
				}
			}

			padding: @measure;
			@media ( min-width: 1000px ) {
				padding: 2 * @measure;
			}
		}

		.widgettitle {
			.widgettitle-mixin();
			text-align: center;
		}

		img {
			.homepage-shadow();
			padding: 0;
			display: block;
		}
		li {
			// so the shadow may overflow the bounds of the li
			overflow: visible;
		}
		li a:first-child {
			// wraps the image
			display: block;
		}

		h5 {
			font-size: 20px;
			margin-top: 1em;
			line-height: 1.5;
			a {
				text-decoration: none;
			}
		}

		li + li {
			margin-top: 2 * @measure;
		}

		li .morelink {
			text-decoration: none;
			text-transform: uppercase;
			font-size: 14px;
			.arrow();
		}
		li:nth-child(1) {
			h5 {
				font-size: 24px;
			}
			.morelink {
				display: inline-block;
				line-height: 1;
				.btn();
				&::after {
					display: none;
				}
			}
		}

		@supports( display: grid ) {
			ul li:nth-child( 1 ) { grid-area: a; }
			ul li:nth-child( 2 ) { grid-area: b; }
			ul li:nth-child( 3 ) { grid-area: c; }
			@media ( min-width: 700px ) {
				ul {
					display: grid;
					grid-template-areas:
						"a a b"
						"a a c"
					;
					grid-template-columns: 1fr 1fr 1fr;
					grid-gap: @measure;
				}
				li p {
					display: none;
				}
				h5 {
					font-size: 24px;
				}
				li:nth-child(1) {
					h5 {
						font-size: 32px;
					}
					p {
						display: block;
					}
					margin-bottom: 0.5em;
				}
				li,
				li + li{
					margin: 0;
				}
			}
			@media ( min-width: 1000px ) {
				ul {
					grid-gap: 2 * @measure;
				}
			}
		}
	}
}
.impact-widget-area {
    margin-top: @measure;
    padding-top: @measure * 2;
    margin-bottom: @measure * 2;
    position: relative;
    @media (min-width: 769px) {
        padding-top: 5rem;
    }
    &::before {
        content: '';
        width: 100%;
        height: 55%;
        position: absolute;
        top: 0;
        background-image: url("/wp-content/themes/ipbs-largo/assets/gray.png");
        background-color: @lightgrey;
        background-position-y: -500px;
        z-index: -1;
        @media (max-width: 999px) {
            height: 45%;
        }
        @media (max-width: 768px) {
            background-position-x: -450px;
            height: 10%;
        }
    }
    .widget-area {
        @media (min-width: 769px) {
            display: grid;
            grid-template-areas: 
                "title title title"
                "image1 image2 image3"
            ;
            grid-gap: @measure + 1rem;
            padding: 0 @measure * 2;
            .widget {
                &:first-of-type {
                    grid-area: title;
                    margin-bottom: 0;
                }
                &:nth-of-type(2) {
                    grid-area: image1;
                }
                &:nth-of-type(3) {
                    grid-area: image2;
                }
                &:nth-of-type(4) {
                    grid-area: image3;
                }
            }
        }
        .widget {
            .widgettitle {
                margin-bottom: 0;
            }
            p {
                margin-bottom: 0;
            }
            h4 {
                font-size: 20px;
                font-weight: 600;
                line-height: 32px;
                color: @black;
                margin-bottom: 0.5rem;
            }
            img {
                width: 100%;
                .homepage-shadow();
            }
        }
    }
}
.widget_gce_widget {
    .simcal-day-label {
        display: none;
    }
    .simcal-day {
        background: @lightgrey;
        padding: @measure;
        margin-bottom: @measure * 2!important;
        .simcal-event-details {
            .date {
                color: @black;
                font-weight: 600;
                letter-spacing: 0.45px;
                line-height: 2rem;
                text-transform: uppercase;
            }
            h4{
                margin-bottom: @measure - 1rem;
                .simcal-event-title {
                    font-size: 24px;
                    line-height: 2rem;
                    font-weight: 600;
                }
            }
            .simcal-event-description {
                margin-bottom: @measure;
            }
            .details {
                border-top: 1px solid @grey;
                padding-top: @measure;
                .details-link {
                    a {
                        color: @darkred;
                        font-weight: 600;
                        font-size: 14px;
                        line-height: 2rem;
                        letter-spacing: 0.45px;
                        text-decoration: none;
                        @media (min-width: 770px) {
                            border-left: 1px solid @grey;
                            padding-left: @measure;
                            float: right;
                        }
                        .arrow;
                        &:hover {
                            color: @black;
                        }
                    }
                    @media (max-width: 769px) {
                        float: none;
                        border: none;
                        a {
                            padding-left: 0;
                        }
                    }
                }
            }
        }
    }
}
